"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var _createClass = function () {
  function a(e, c) {
    for (var b = 0; b < c.length; b++) {
      var d = c[b];d.enumerable = d.enumerable || false;d.configurable = true;if ("value" in d) {
        d.writable = true;
      }Object.defineProperty(e, d.key, d);
    }
  }return function (d, b, c) {
    if (b) {
      a(d.prototype, b);
    }if (c) {
      a(d, c);
    }return d;
  };
}();function _classCallCheck(a, b) {
  if (!(a instanceof b)) {
    throw new TypeError("Cannot call a class as a function");
  }
}var ERROR_CONF = { KEY_ERR: 311, KEY_ERR_MSG: "key格式错误", PARAM_ERR: 310, PARAM_ERR_MSG: "请求参数信息有误", SYSTEM_ERR: 600, SYSTEM_ERR_MSG: "系统错误", WX_ERR_CODE: 1000, WX_OK_CODE: 200 };var BASE_URL = "https://apis.map.qq.com/ws/";var URL_SEARCH = BASE_URL + "place/v1/search";var URL_SUGGESTION = BASE_URL + "place/v1/suggestion";var URL_GET_GEOCODER = BASE_URL + "geocoder/v1/";var URL_CITY_LIST = BASE_URL + "district/v1/list";var URL_AREA_LIST = BASE_URL + "district/v1/getchildren";var URL_DISTANCE = BASE_URL + "distance/v1/";var Utils = { location2query: function location2query(c) {
    if (typeof c == "string") {
      return c;
    }var b = "";for (var a = 0; a < c.length; a++) {
      var e = c[a];if (!!b) {
        b += ";";
      }if (e.location) {
        b = b + e.location.lat + "," + e.location.lng;
      }if (e.latitude && e.longitude) {
        b = b + e.latitude + "," + e.longitude;
      }
    }return b;
  }, getWXLocation: function getWXLocation(c, b, a) {
    wx.getLocation({ type: "gcj02", success: c, fail: b, complete: a });
  }, getLocationParam: function getLocationParam(b) {
    if (typeof b == "string") {
      var a = b.split(",");if (a.length === 2) {
        b = { latitude: b.split(",")[0], longitude: b.split(",")[1] };
      } else {
        b = {};
      }
    }return b;
  }, polyfillParam: function polyfillParam(a) {
    a.success = a.success || function () {};a.fail = a.fail || function () {};a.complete = a.complete || function () {};
  }, checkParamKeyEmpty: function checkParamKeyEmpty(c, b) {
    if (!c[b]) {
      var a = this.buildErrorConfig(ERROR_CONF.PARAM_ERR, ERROR_CONF.PARAM_ERR_MSG + b + "参数格式有误");c.fail(a);c.complete(a);return true;
    }return false;
  }, checkKeyword: function checkKeyword(a) {
    return !this.checkParamKeyEmpty(a, "keyword");
  }, checkLocation: function checkLocation(c) {
    var a = this.getLocationParam(c.location);if (!a || !a.latitude || !a.longitude) {
      var b = this.buildErrorConfig(ERROR_CONF.PARAM_ERR, ERROR_CONF.PARAM_ERR_MSG + " location参数格式有误");c.fail(b);c.complete(b);return false;
    }return true;
  }, buildErrorConfig: function buildErrorConfig(a, b) {
    return { status: a, message: b };
  }, buildWxRequestConfig: function buildWxRequestConfig(c, a) {
    var b = this;a.header = { "content-type": "application/json" };a.method = "GET";a.success = function (d) {
      var e = d.data;if (e.status === 0) {
        c.success(e);
      } else {
        c.fail(e);
      }
    };a.fail = function (d) {
      d.statusCode = ERROR_CONF.WX_ERR_CODE;c.fail(b.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, result.errMsg));
    };a.complete = function (d) {
      var e = +d.statusCode;switch (e) {case ERROR_CONF.WX_ERR_CODE:
          c.complete(b.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, d.errMsg));break;case ERROR_CONF.WX_OK_CODE:
          var f = d.data;if (f.status === 0) {
            c.complete(f);
          } else {
            c.complete(b.buildErrorConfig(f.status, f.message));
          }break;default:
          c.complete(b.buildErrorConfig(ERROR_CONF.SYSTEM_ERR, ERROR_CONF.SYSTEM_ERR_MSG));}
    };return a;
  }, locationProcess: function locationProcess(f, e, c, a) {
    var d = this;c = c || function (g) {
      g.statusCode = ERROR_CONF.WX_ERR_CODE;f.fail(d.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, g.errMsg));
    };a = a || function (g) {
      if (g.statusCode == ERROR_CONF.WX_ERR_CODE) {
        f.complete(d.buildErrorConfig(ERROR_CONF.WX_ERR_CODE, g.errMsg));
      }
    };if (!f.location) {
      d.getWXLocation(e, c, a);
    } else {
      if (d.checkLocation(f)) {
        var b = Utils.getLocationParam(f.location);e(b);
      }
    }
  } };var QQMapWX = function () {
  function b(i) {
    _classCallCheck(this, b);if (!i.key) {
      throw Error("key值不能为空");
    }this.key = i.key;
  }_createClass(b, [{ key: "search", value: function f(i) {
      var l = this;i = i || {};Utils.polyfillParam(i);if (!Utils.checkKeyword(i)) {
        return;
      }var k = { keyword: i.keyword, orderby: i.orderby || "_distance", page_size: i.page_size || 10, page_index: i.page_index || 1, output: "json", key: l.key };if (i.address_format) {
        k.address_format = i.address_format;
      }if (i.filter) {
        k.filter = i.filter;
      }var n = i.distance || "1000";var j = i.auto_extend || 1;var m = function m(o) {
        k.boundary = "nearby(" + o.latitude + "," + o.longitude + "," + n + "," + j + ")";wx.request(Utils.buildWxRequestConfig(i, { url: URL_SEARCH, data: k }));
      };Utils.locationProcess(i, m);
    } }, { key: "getSuggestion", value: function h(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);if (!Utils.checkKeyword(i)) {
        return;
      }var j = { keyword: i.keyword, region: i.region || "全国", region_fix: i.region_fix || 0, policy: i.policy || 0, output: "json", key: k.key };wx.request(Utils.buildWxRequestConfig(i, { url: URL_SUGGESTION, data: j }));
    } }, { key: "reverseGeocoder", value: function a(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);var j = { coord_type: i.coord_type || 5, get_poi: i.get_poi || 0, output: "json", key: k.key };if (i.poi_options) {
        j.poi_options = i.poi_options;
      }var l = function l(m) {
        j.location = m.latitude + "," + m.longitude;wx.request(Utils.buildWxRequestConfig(i, { url: URL_GET_GEOCODER, data: j }));
      };Utils.locationProcess(i, l);
    } }, { key: "geocoder", value: function g(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);if (Utils.checkParamKeyEmpty(i, "address")) {
        return;
      }var j = { address: i.address, output: "json", key: k.key };wx.request(Utils.buildWxRequestConfig(i, { url: URL_GET_GEOCODER, data: j }));
    } }, { key: "getCityList", value: function c(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);var j = { output: "json", key: k.key };
      wx.request(Utils.buildWxRequestConfig(i, { url: URL_CITY_LIST, data: j }));
    } }, { key: "getDistrictByCityId", value: function d(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);if (Utils.checkParamKeyEmpty(i, "id")) {
        return;
      }var j = { id: i.id || "", output: "json", key: k.key };wx.request(Utils.buildWxRequestConfig(i, { url: URL_AREA_LIST, data: j }));
    } }, { key: "calculateDistance", value: function e(i) {
      var k = this;i = i || {};Utils.polyfillParam(i);if (Utils.checkParamKeyEmpty(i, "to")) {
        return;
      }var j = { mode: i.mode || "walking", to: Utils.location2query(i.to), output: "json", key: k.key };var l = function l(m) {
        j.from = m.latitude + "," + m.longitude;wx.request(Utils.buildWxRequestConfig(i, { url: URL_DISTANCE, data: j }));
      };if (i.from) {
        i.location = i.from;
      }Utils.locationProcess(i, l);
    } }]);return b;
}();exports.default = QQMapWX;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInFxbWFwLXd4LWpzc2RrLm1pbi5qcyJdLCJuYW1lcyI6WyJfY3JlYXRlQ2xhc3MiLCJhIiwiZSIsImMiLCJiIiwibGVuZ3RoIiwiZCIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG90eXBlIiwiX2NsYXNzQ2FsbENoZWNrIiwiVHlwZUVycm9yIiwiRVJST1JfQ09ORiIsIktFWV9FUlIiLCJLRVlfRVJSX01TRyIsIlBBUkFNX0VSUiIsIlBBUkFNX0VSUl9NU0ciLCJTWVNURU1fRVJSIiwiU1lTVEVNX0VSUl9NU0ciLCJXWF9FUlJfQ09ERSIsIldYX09LX0NPREUiLCJCQVNFX1VSTCIsIlVSTF9TRUFSQ0giLCJVUkxfU1VHR0VTVElPTiIsIlVSTF9HRVRfR0VPQ09ERVIiLCJVUkxfQ0lUWV9MSVNUIiwiVVJMX0FSRUFfTElTVCIsIlVSTF9ESVNUQU5DRSIsIlV0aWxzIiwibG9jYXRpb24ycXVlcnkiLCJsb2NhdGlvbiIsImxhdCIsImxuZyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiZ2V0V1hMb2NhdGlvbiIsInd4IiwiZ2V0TG9jYXRpb24iLCJ0eXBlIiwic3VjY2VzcyIsImZhaWwiLCJjb21wbGV0ZSIsImdldExvY2F0aW9uUGFyYW0iLCJzcGxpdCIsInBvbHlmaWxsUGFyYW0iLCJjaGVja1BhcmFtS2V5RW1wdHkiLCJidWlsZEVycm9yQ29uZmlnIiwiY2hlY2tLZXl3b3JkIiwiY2hlY2tMb2NhdGlvbiIsInN0YXR1cyIsIm1lc3NhZ2UiLCJidWlsZFd4UmVxdWVzdENvbmZpZyIsImhlYWRlciIsIm1ldGhvZCIsImRhdGEiLCJzdGF0dXNDb2RlIiwicmVzdWx0IiwiZXJyTXNnIiwiZiIsImxvY2F0aW9uUHJvY2VzcyIsImciLCJRUU1hcFdYIiwiaSIsIkVycm9yIiwidmFsdWUiLCJsIiwiayIsImtleXdvcmQiLCJvcmRlcmJ5IiwicGFnZV9zaXplIiwicGFnZV9pbmRleCIsIm91dHB1dCIsImFkZHJlc3NfZm9ybWF0IiwiZmlsdGVyIiwibiIsImRpc3RhbmNlIiwiaiIsImF1dG9fZXh0ZW5kIiwibSIsIm8iLCJib3VuZGFyeSIsInJlcXVlc3QiLCJ1cmwiLCJoIiwicmVnaW9uIiwicmVnaW9uX2ZpeCIsInBvbGljeSIsImNvb3JkX3R5cGUiLCJnZXRfcG9pIiwicG9pX29wdGlvbnMiLCJhZGRyZXNzIiwiaWQiLCJtb2RlIiwidG8iLCJmcm9tIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBLElBQUlBLGVBQWEsWUFBVTtBQUFDLFdBQVNDLENBQVQsQ0FBV0MsQ0FBWCxFQUFhQyxDQUFiLEVBQWU7QUFBQyxTQUFJLElBQUlDLElBQUUsQ0FBVixFQUFZQSxJQUFFRCxFQUFFRSxNQUFoQixFQUF1QkQsR0FBdkIsRUFBMkI7QUFBQyxVQUFJRSxJQUFFSCxFQUFFQyxDQUFGLENBQU4sQ0FBV0UsRUFBRUMsVUFBRixHQUFhRCxFQUFFQyxVQUFGLElBQWMsS0FBM0IsQ0FBaUNELEVBQUVFLFlBQUYsR0FBZSxJQUFmLENBQW9CLElBQUcsV0FBV0YsQ0FBZCxFQUFnQjtBQUFDQSxVQUFFRyxRQUFGLEdBQVcsSUFBWDtBQUFnQixjQUFPQyxjQUFQLENBQXNCUixDQUF0QixFQUF3QkksRUFBRUssR0FBMUIsRUFBOEJMLENBQTlCO0FBQWlDO0FBQUMsVUFBTyxVQUFTQSxDQUFULEVBQVdGLENBQVgsRUFBYUQsQ0FBYixFQUFlO0FBQUMsUUFBR0MsQ0FBSCxFQUFLO0FBQUNILFFBQUVLLEVBQUVNLFNBQUosRUFBY1IsQ0FBZDtBQUFpQixTQUFHRCxDQUFILEVBQUs7QUFBQ0YsUUFBRUssQ0FBRixFQUFJSCxDQUFKO0FBQU8sWUFBT0csQ0FBUDtBQUFTLEdBQXBFO0FBQXFFLENBQS9QLEVBQWpCLENBQW1SLFNBQVNPLGVBQVQsQ0FBeUJaLENBQXpCLEVBQTJCRyxDQUEzQixFQUE2QjtBQUFDLE1BQUcsRUFBRUgsYUFBYUcsQ0FBZixDQUFILEVBQXFCO0FBQUMsVUFBTSxJQUFJVSxTQUFKLENBQWMsbUNB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LElBQU4sQ0FBV0osSUFBRUEsS0FBRyxFQUFMLENBQVFsQyxNQUFNZ0IsYUFBTixDQUFvQmtCLENBQXBCLEVBQXVCLElBQUdsQyxNQUFNaUIsa0JBQU4sQ0FBeUJpQixDQUF6QixFQUEyQixJQUEzQixDQUFILEVBQW9DO0FBQUM7QUFBTyxXQUFJYyxJQUFFLEVBQUNnQixNQUFLOUIsRUFBRThCLElBQUYsSUFBUSxTQUFkLEVBQXdCQyxJQUFHakUsTUFBTUMsY0FBTixDQUFxQmlDLEVBQUUrQixFQUF2QixDQUEzQixFQUFzRHRCLFFBQU8sTUFBN0QsRUFBb0UvRCxLQUFJMEQsRUFBRTFELEdBQTFFLEVBQU4sQ0FBcUYsSUFBSXlELElBQUUsU0FBU0EsQ0FBVCxDQUFXYSxDQUFYLEVBQWE7QUFBQ0YsVUFBRWtCLElBQUYsR0FBT2hCLEVBQUU3QyxRQUFGLEdBQVcsR0FBWCxHQUFlNkMsRUFBRTVDLFNBQXhCLENBQWtDRSxHQUFHNkMsT0FBSCxDQUFXckQsTUFBTXVCLG9CQUFOLENBQTJCVyxDQUEzQixFQUE2QixFQUFDb0IsS0FBSXZELFlBQUwsRUFBa0IyQixNQUFLc0IsQ0FBdkIsRUFBN0IsQ0FBWDtBQUFvRSxPQUExSCxDQUEySCxJQUFHZCxFQUFFZ0MsSUFBTCxFQUFVO0FBQUNoQyxVQUFFaEMsUUFBRixHQUFXZ0MsRUFBRWdDLElBQWI7QUFBa0IsYUFBTW5DLGVBQU4sQ0FBc0JHLENBQXRCLEVBQXdCRyxDQUF4QjtBQUEyQixLQUEzWSxFQUR1aUcsQ0FBZixFQUN6b0YsT0FBT2hFLENBQVA7QUFBUyxDQUQ2aEYsRUFBWixDLGtCQUMvL0U0RCxPIiwiZmlsZSI6InFxbWFwLXd4LWpzc2RrLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBfY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGUsYyl7Zm9yKHZhciBiPTA7YjxjLmxlbmd0aDtiKyspe3ZhciBkPWNbYl07ZC5lbnVtZXJhYmxlPWQuZW51bWVyYWJsZXx8ZmFsc2U7ZC5jb25maWd1cmFibGU9dHJ1ZTtpZihcInZhbHVlXCIgaW4gZCl7ZC53cml0YWJsZT10cnVlfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGQua2V5LGQpfX1yZXR1cm4gZnVuY3Rpb24oZCxiLGMpe2lmKGIpe2EoZC5wcm90b3R5cGUsYil9aWYoYyl7YShkLGMpfXJldHVybiBkfX0oKTtmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soYSxiKXtpZighKGEgaW5zdGFuY2VvZiBiKSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX19dmFyIEVSUk9SX0NPTkY9e0tFWV9FUlI6MzExLEtFWV9FUlJfTVNHOlwia2V55qC85byP6ZSZ6K+vXCIsUEFSQU1fRVJSOjMxMCxQQVJBTV9FUlJfTVNHOlwi6K+35rGC5Y+C5pWw5L+h5oGv5pyJ6K+vXCIsU1lTVEVNX0VSUjo2MDAsU1lTVEVNX0VSUl9NU0c6XCLns7vnu5/plJnor69cIixXWF9FUlJfQ09ERToxMDAwLFdYX09LX0NPREU6MjAwfTt2YXIgQkFTRV9VUkw9XCJodHRwczovL2FwaXMubWFwLnFxLmNvbS93cy9cIjt2YXIgVVJMX1NFQVJDSD1CQVNFX1VSTCtcInBsYWNlL3YxL3NlYXJjaFwiO3ZhciBVUkxfU1VHR0VTVElPTj1CQVNFX1VSTCtcInBsYWNlL3YxL3N1Z2dlc3Rpb25cIjt2YXIgVVJMX0dFVF9HRU9DT0RFUj1CQVNFX1VSTCtcImdlb2NvZGVyL3YxL1wiO3ZhciBVUkxfQ0lUWV9MSVNUPUJBU0VfVVJMK1wiZGlzdHJpY3QvdjEvbGlzdFwiO3ZhciBVUkxfQVJFQV9MSVNUPUJBU0VfVVJMK1wiZGlzdHJpY3QvdjEvZ2V0Y2hpbGRyZW5cIjt2YXIgVVJMX0RJU1RBTkNFPUJBU0VfVVJMK1wiZGlzdGFuY2UvdjEvXCI7dmFyIFV0aWxzPXtsb2NhdGlvbjJxdWVyeTpmdW5jdGlvbiBsb2NhdGlvbjJxdWVyeShjKXtpZih0eXBlb2YgYz09XCJzdHJpbmdcIil7cmV0dXJuIGN9dmFyIGI9XCJcIjtmb3IodmFyIGE9MDthPGMubGVuZ3RoO2ErKyl7dmFyIGU9Y1thXTtpZighIWIpe2IrPVwiO1wifWlmKGUubG9jYXRpb24pe2I9YitlLmxvY2F0aW9uLmxhdCtcIixcIitlLmxvY2F0aW9uLmxuZ31pZihlLmxhdGl0dWRlJiZlLmxvbmdpdHVkZSl7Yj1iK2UubGF0aXR1ZGUrXCIsXCIrZS5sb25naXR1ZGV9fXJldHVybiBifSxnZXRXWExvY2F0aW9uOmZ1bmN0aW9uIGdldFdYTG9jYXRpb24oYyxiLGEpe3d4LmdldExvY2F0aW9uKHt0eXBlOlwiZ2NqMDJcIixzdWNjZXNzOmMsZmFpbDpiLGNvbXBsZXRlOmF9KX0sZ2V0TG9jYXRpb25QYXJhbTpmdW5jdGlvbiBnZXRMb2NhdGlvblBhcmFtKGIpe2lmKHR5cGVvZiBiPT1cInN0cmluZ1wiKXt2YXIgYT1iLnNwbGl0KFwiLFwiKTtpZihhLmxlbmd0aD09PTIpe2I9e2xhdGl0dWRlOmIuc3BsaXQoXCIsXCIpWzBdLGxvbmdpdHVkZTpiLnNwbGl0KFwiLFwiKVsxXX19ZWxzZXtiPXt9fX1yZXR1cm4gYn0scG9seWZpbGxQYXJhbTpmdW5jdGlvbiBwb2x5ZmlsbFBhcmFtKGEpe2Euc3VjY2Vzcz1hLnN1Y2Nlc3N8fGZ1bmN0aW9uKCl7fTthLmZhaWw9YS5mYWlsfHxmdW5jdGlvbigpe307YS5jb21wbGV0ZT1hLmNvbXBsZXRlfHxmdW5jdGlvbigpe319LGNoZWNrUGFyYW1LZXlFbXB0eTpmdW5jdGlvbiBjaGVja1BhcmFtS2V5RW1wdHkoYyxiKXtpZighY1tiXSl7dmFyIGE9dGhpcy5idWlsZEVycm9yQ29uZmlnKEVSUk9SX0NPTkYuUEFSQU1fRVJSLEVSUk9SX0NPTkYuUEFSQU1fRVJSX01TRytiK1wi5Y+C5pWw5qC85byP5pyJ6K+vXCIpO2MuZmFpbChhKTtjLmNvbXBsZXRlKGEpO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX0sY2hlY2tLZXl3b3JkOmZ1bmN0aW9uIGNoZWNrS2V5d29yZChhKXtyZXR1cm4gIXRoaXMuY2hlY2tQYXJhbUtleUVtcHR5KGEsXCJrZXl3b3JkXCIpfSxjaGVja0xvY2F0aW9uOmZ1bmN0aW9uIGNoZWNrTG9jYXRpb24oYyl7dmFyIGE9dGhpcy5nZXRMb2NhdGlvblBhcmFtKGMubG9jYXRpb24pO2lmKCFhfHwhYS5sYXRpdHVkZXx8IWEubG9uZ2l0dWRlKXt2YXIgYj10aGlzLmJ1aWxkRXJyb3JDb25maWcoRVJST1JfQ09ORi5QQVJBTV9FUlIsRVJST1JfQ09ORi5QQVJBTV9FUlJfTVNHK1wiIGxvY2F0aW9u5Y+C5pWw5qC85byP5pyJ6K+vXCIpO2MuZmFpbChiKTtjLmNvbXBsZXRlKGIpO3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0sYnVpbGRFcnJvckNvbmZpZzpmdW5jdGlvbiBidWlsZEVycm9yQ29uZmlnKGEsYil7cmV0dXJue3N0YXR1czphLG1lc3NhZ2U6Yn19LGJ1aWxkV3hSZXF1ZXN0Q29uZmlnOmZ1bmN0aW9uIGJ1aWxkV3hSZXF1ZXN0Q29uZmlnKGMsYSl7dmFyIGI9dGhpczthLmhlYWRlcj17XCJjb250ZW50LXR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb25cIn07YS5tZXRob2Q9XCJHRVRcIjthLnN1Y2Nlc3M9ZnVuY3Rpb24oZCl7dmFyIGU9ZC5kYXRhO2lmKGUuc3RhdHVzPT09MCl7Yy5zdWNjZXNzKGUpfWVsc2V7Yy5mYWlsKGUpfX07YS5mYWlsPWZ1bmN0aW9uKGQpe2Quc3RhdHVzQ29kZT1FUlJPUl9DT05GLldYX0VSUl9DT0RFO2MuZmFpbChiLmJ1aWxkRXJyb3JDb25maWcoRVJST1JfQ09ORi5XWF9FUlJfQ09ERSxyZXN1bHQuZXJyTXNnKSl9O2EuY29tcGxldGU9ZnVuY3Rpb24oZCl7dmFyIGU9K2Quc3RhdHVzQ29kZTtzd2l0Y2goZSl7Y2FzZSBFUlJPUl9DT05GLldYX0VSUl9DT0RFOmMuY29tcGxldGUoYi5idWlsZEVycm9yQ29uZmlnKEVSUk9SX0NPTkYuV1hfRVJSX0NPREUsZC5lcnJNc2cpKTticmVhaztjYXNlIEVSUk9SX0NPTkYuV1hfT0tfQ09ERTp2YXIgZj1kLmRhdGE7aWYoZi5zdGF0dXM9PT0wKXtjLmNvbXBsZXRlKGYpfWVsc2V7Yy5jb21wbGV0ZShiLmJ1aWxkRXJyb3JDb25maWcoZi5zdGF0dXMsZi5tZXNzYWdlKSl9YnJlYWs7ZGVmYXVsdDpjLmNvbXBsZXRlKGIuYnVpbGRFcnJvckNvbmZpZyhFUlJPUl9DT05GLlNZU1RFTV9FUlIsRVJST1JfQ09ORi5TWVNURU1fRVJSX01TRykpfX07cmV0dXJuIGF9LGxvY2F0aW9uUHJvY2VzczpmdW5jdGlvbiBsb2NhdGlvblByb2Nlc3MoZixlLGMsYSl7dmFyIGQ9dGhpcztjPWN8fGZ1bmN0aW9uKGcpe2cuc3RhdHVzQ29kZT1FUlJPUl9DT05GLldYX0VSUl9DT0RFO2YuZmFpbChkLmJ1aWxkRXJyb3JDb25maWcoRVJST1JfQ09ORi5XWF9FUlJfQ09ERSxnLmVyck1zZykpfTthPWF8fGZ1bmN0aW9uKGcpe2lmKGcuc3RhdHVzQ29kZT09RVJST1JfQ09ORi5XWF9FUlJfQ09ERSl7Zi5jb21wbGV0ZShkLmJ1aWxkRXJyb3JDb25maWcoRVJST1JfQ09ORi5XWF9FUlJfQ09ERSxnLmVyck1zZykpfX07aWYoIWYubG9jYXRpb24pe2QuZ2V0V1hMb2NhdGlvbihlLGMsYSl9ZWxzZXtpZihkLmNoZWNrTG9jYXRpb24oZikpe3ZhciBiPVV0aWxzLmdldExvY2F0aW9uUGFyYW0oZi5sb2NhdGlvbik7ZShiKX19fX07dmFyIFFRTWFwV1g9ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGkpe19jbGFzc0NhbGxDaGVjayh0aGlzLGIpO2lmKCFpLmtleSl7dGhyb3cgRXJyb3IoXCJrZXnlgLzkuI3og73kuLrnqbpcIil9dGhpcy5rZXk9aS5rZXl9X2NyZWF0ZUNsYXNzKGIsW3trZXk6XCJzZWFyY2hcIix2YWx1ZTpmdW5jdGlvbiBmKGkpe3ZhciBsPXRoaXM7aT1pfHx7fTtVdGlscy5wb2x5ZmlsbFBhcmFtKGkpO2lmKCFVdGlscy5jaGVja0tleXdvcmQoaSkpe3JldHVybn12YXIgaz17a2V5d29yZDppLmtleXdvcmQsb3JkZXJieTppLm9yZGVyYnl8fFwiX2Rpc3RhbmNlXCIscGFnZV9zaXplOmkucGFnZV9zaXplfHwxMCxwYWdlX2luZGV4OmkucGFnZV9pbmRleHx8MSxvdXRwdXQ6XCJqc29uXCIsa2V5Omwua2V5fTtpZihpLmFkZHJlc3NfZm9ybWF0KXtrLmFkZHJlc3NfZm9ybWF0PWkuYWRkcmVzc19mb3JtYXR9aWYoaS5maWx0ZXIpe2suZmlsdGVyPWkuZmlsdGVyfXZhciBuPWkuZGlzdGFuY2V8fFwiMTAwMFwiO3ZhciBqPWkuYXV0b19leHRlbmR8fDE7dmFyIG09ZnVuY3Rpb24gbShvKXtrLmJvdW5kYXJ5PVwibmVhcmJ5KFwiK28ubGF0aXR1ZGUrXCIsXCIrby5sb25naXR1ZGUrXCIsXCIrbitcIixcIitqK1wiKVwiO3d4LnJlcXVlc3QoVXRpbHMuYnVpbGRXeFJlcXVlc3RDb25maWcoaSx7dXJsOlVSTF9TRUFSQ0gsZGF0YTprfSkpfTtVdGlscy5sb2NhdGlvblByb2Nlc3MoaSxtKX19LHtrZXk6XCJnZXRTdWdnZXN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24gaChpKXt2YXIgaz10aGlzO2k9aXx8e307VXRpbHMucG9seWZpbGxQYXJhbShpKTtpZighVXRpbHMuY2hlY2tLZXl3b3JkKGkpKXtyZXR1cm59dmFyIGo9e2tleXdvcmQ6aS5rZXl3b3JkLHJlZ2lvbjppLnJlZ2lvbnx8XCLlhajlm71cIixyZWdpb25fZml4OmkucmVnaW9uX2ZpeHx8MCxwb2xpY3k6aS5wb2xpY3l8fDAsb3V0cHV0OlwianNvblwiLGtleTprLmtleX07d3gucmVxdWVzdChVdGlscy5idWlsZFd4UmVxdWVzdENvbmZpZyhpLHt1cmw6VVJMX1NVR0dFU1RJT04sZGF0YTpqfSkpfX0se2tleTpcInJldmVyc2VHZW9jb2RlclwiLHZhbHVlOmZ1bmN0aW9uIGEoaSl7dmFyIGs9dGhpcztpPWl8fHt9O1V0aWxzLnBvbHlmaWxsUGFyYW0oaSk7dmFyIGo9e2Nvb3JkX3R5cGU6aS5jb29yZF90eXBlfHw1LGdldF9wb2k6aS5nZXRfcG9pfHwwLG91dHB1dDpcImpzb25cIixrZXk6ay5rZXl9O2lmKGkucG9pX29wdGlvbnMpe2oucG9pX29wdGlvbnM9aS5wb2lfb3B0aW9uc312YXIgbD1mdW5jdGlvbiBsKG0pe2oubG9jYXRpb249bS5sYXRpdHVkZStcIixcIittLmxvbmdpdHVkZTt3eC5yZXF1ZXN0KFV0aWxzLmJ1aWxkV3hSZXF1ZXN0Q29uZmlnKGkse3VybDpVUkxfR0VUX0dFT0NPREVSLGRhdGE6an0pKX07VXRpbHMubG9jYXRpb25Qcm9jZXNzKGksbCl9fSx7a2V5OlwiZ2VvY29kZXJcIix2YWx1ZTpmdW5jdGlvbiBnKGkpe3ZhciBrPXRoaXM7aT1pfHx7fTtVdGlscy5wb2x5ZmlsbFBhcmFtKGkpO2lmKFV0aWxzLmNoZWNrUGFyYW1LZXlFbXB0eShpLFwiYWRkcmVzc1wiKSl7cmV0dXJufXZhciBqPXthZGRyZXNzOmkuYWRkcmVzcyxvdXRwdXQ6XCJqc29uXCIsa2V5Omsua2V5fTt3eC5yZXF1ZXN0KFV0aWxzLmJ1aWxkV3hSZXF1ZXN0Q29uZmlnKGkse3VybDpVUkxfR0VUX0dFT0NPREVSLGRhdGE6an0pKX19LHtrZXk6XCJnZXRDaXR5TGlzdFwiLHZhbHVlOmZ1bmN0aW9uIGMoaSl7dmFyIGs9dGhpcztpPWl8fHt9O1V0aWxzLnBvbHlmaWxsUGFyYW0oaSk7dmFyIGo9e291dHB1dDpcImpzb25cIixrZXk6ay5rZXl9O1xyXG53eC5yZXF1ZXN0KFV0aWxzLmJ1aWxkV3hSZXF1ZXN0Q29uZmlnKGkse3VybDpVUkxfQ0lUWV9MSVNULGRhdGE6an0pKX19LHtrZXk6XCJnZXREaXN0cmljdEJ5Q2l0eUlkXCIsdmFsdWU6ZnVuY3Rpb24gZChpKXt2YXIgaz10aGlzO2k9aXx8e307VXRpbHMucG9seWZpbGxQYXJhbShpKTtpZihVdGlscy5jaGVja1BhcmFtS2V5RW1wdHkoaSxcImlkXCIpKXtyZXR1cm59dmFyIGo9e2lkOmkuaWR8fFwiXCIsb3V0cHV0OlwianNvblwiLGtleTprLmtleX07d3gucmVxdWVzdChVdGlscy5idWlsZFd4UmVxdWVzdENvbmZpZyhpLHt1cmw6VVJMX0FSRUFfTElTVCxkYXRhOmp9KSl9fSx7a2V5OlwiY2FsY3VsYXRlRGlzdGFuY2VcIix2YWx1ZTpmdW5jdGlvbiBlKGkpe3ZhciBrPXRoaXM7aT1pfHx7fTtVdGlscy5wb2x5ZmlsbFBhcmFtKGkpO2lmKFV0aWxzLmNoZWNrUGFyYW1LZXlFbXB0eShpLFwidG9cIikpe3JldHVybn12YXIgaj17bW9kZTppLm1vZGV8fFwid2Fsa2luZ1wiLHRvOlV0aWxzLmxvY2F0aW9uMnF1ZXJ5KGkudG8pLG91dHB1dDpcImpzb25cIixrZXk6ay5rZXl9O3ZhciBsPWZ1bmN0aW9uIGwobSl7ai5mcm9tPW0ubGF0aXR1ZGUrXCIsXCIrbS5sb25naXR1ZGU7d3gucmVxdWVzdChVdGlscy5idWlsZFd4UmVxdWVzdENvbmZpZyhpLHt1cmw6VVJMX0RJU1RBTkNFLGRhdGE6an0pKX07aWYoaS5mcm9tKXtpLmxvY2F0aW9uPWkuZnJvbX1VdGlscy5sb2NhdGlvblByb2Nlc3MoaSxsKX19XSk7cmV0dXJuIGJ9KCk7ZXhwb3J0IGRlZmF1bHQgUVFNYXBXWDtcclxuIl19